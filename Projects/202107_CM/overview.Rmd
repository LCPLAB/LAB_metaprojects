---
title: "overview"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(osfr)
```

### 下載原始資料映像檔

```{r echo=TRUE, message=FALSE, warning=FALSE}
## Download and load W1 rawdata from OSF
osf_retrieve_file("he2v7") %>%
  osf_download()
## Download and load W2 rawdata from OSF
osf_retrieve_file("ch68a") %>%
  osf_download() 
```

### 載入原始資料物件

```{r message=FALSE, warning=FALSE}
load(list.files(recursive = TRUE,full.names = TRUE,include.dirs = TRUE,pattern = "*.Rdata")[1])
load(list.files(recursive = TRUE,full.names = TRUE,include.dirs = TRUE,pattern = "*.Rdata")[2])
ls()
file.remove(list.files(recursive = TRUE,full.names = TRUE,include.dirs = TRUE,pattern = "*.Rdata"))
```

### Wave 1原始資料欄位說明清單

```{r}
items %>% rmarkdown::paged_table(options = list(rows.print = 20))
```

### Wave 2 原始資料欄位說明清單

```{r}
tag_info %>% rmarkdown::paged_table(options = list(rows.print = 20))
```


### Wave 1 正式分析資料

根據以下描述，篩選納入正式分析的資料：

"Five hundred and twenty-six respondents completed the Wave 1 survey via the Prolific.com platform. Sixteen respondents were excluded for spending too much time on the survey("Duration..in.seconds."). Another nine respondents were excluded for failing the catch question("Q1_CATCH1")."

```{r message=FALSE, warning=FALSE}
## check the equality of two data sets
sum(data_factors$Duration..in.seconds. != data_numeric$Duration..in.seconds.)
## Boxplot for test duration
boxplot(data_numeric$Duration..in.seconds.)

wave1_rawdata <- data_numeric %>% 
## exclude the participants who spent longer duration than the 17th slowest participant
  filter(Duration..in.seconds. <= sort(data_numeric$Duration..in.seconds., decreasing = TRUE)[17]) %>%
## exclude the participants who failed the catch question
  filter(Q1_CATCH1 == 5) 
## How many participants' data are analyzed?
wave1_rawdata %>%
  summarise(n())
```


### Media use code

```{r}
data.frame(TEXT = wave1_rawdata$Q10_1, CODE = wave1_rawdata$Q10_1) %>% distinct() %>% arrange(CODE)
data.frame(TEXT = wave1_rawdata$Q10_2, CODE = wave1_rawdata$Q10_2) %>% distinct() %>% arrange(CODE)

```


### NC 資料數值集

```{r}
wave1_rawdata %>% select(starts_with("Q1_")) %>%
  rmarkdown::paged_table(options = list(rows.print = 20))
```


### NCC資料數值集


```{r}
wave1_rawdata %>% select(starts_with("Q17_")) %>%
  rmarkdown::paged_table(options = list(rows.print = 20))
```
